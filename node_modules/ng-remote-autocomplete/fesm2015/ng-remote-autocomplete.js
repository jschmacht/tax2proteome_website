import { Directive, TemplateRef, Injectable, Component, Input, Output, EventEmitter, ContentChild, forwardRef, ViewChild, ElementRef, HostListener, NgModule } from '@angular/core';
import { Subject } from 'rxjs/Subject';
import { NG_VALUE_ACCESSOR, FormsModule } from '@angular/forms';
import { CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
const DEFAULT_ACTIVE_INDEX = -1;
/** @type {?} */
const DEFAULT_MIN_SEARCH_LENGTH = 1;
/** @type {?} */
const DEFAULT_MAX_CHARS = 2147483647;
/** @type {?} */
const DEFAULT_PAUSE = 100;
/** @type {?} */
const NOT_FOUND_TEXT = "No results found";
/** @type {?} */
const SEARCHING_TEXT = "Searching...";
/** @type {?} */
const SEARCH_WRAPPER_CLASS = "autocomplete-search-wrapper";
/** @type {?} */
const OPTION_VALUE_CLASS = "autocomplete-option-value";
/** @type {?} */
const OPTION_DESCRIPTION_CLASS = "autocomplete-option-description";
/** @type {?} */
const OPTION_CLASS = "autocomplete-option";
/** @type {?} */
const OPTION_LIST_WRAPPER_CLASS = "option-list-wrapper";
/** @type {?} */
const LOADING_CLASS = "autocomplete-loading";
/** @type {?} */
const RESULTS_NOT_FOUND_CLASS = "autocomplete-not-found";

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {number} */
const SearchStateType = {
    Untracked: 0,
    Loading: 1,
    Finished: 2,
};
SearchStateType[SearchStateType.Untracked] = 'Untracked';
SearchStateType[SearchStateType.Loading] = 'Loading';
SearchStateType[SearchStateType.Finished] = 'Finished';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
class OptionTemplateDirective {
    /**
     * @param {?} template
     */
    constructor(template) {
        this.template = template;
    }
}
OptionTemplateDirective.decorators = [
    { type: Directive, args: [{
                selector: '[remote-autocomplete-option-tmpl]'
            },] },
];
OptionTemplateDirective.ctorParameters = () => [
    { type: TemplateRef }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
class AutocompleteService {
    constructor() {
        this.changedHighlightItemSubject = new Subject();
        this.selectItemSubject = new Subject();
        this._isOpen = false;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set isOpen(value) {
        this._isOpen = value;
    }
    /**
     * @return {?}
     */
    get isOpen() {
        return this._isOpen;
    }
}
AutocompleteService.decorators = [
    { type: Injectable },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
class ItemListService {
    /**
     * @param {?} autocompleteService
     */
    constructor(autocompleteService) {
        this.autocompleteService = autocompleteService;
        this._activeIndex = DEFAULT_ACTIVE_INDEX;
        this.items = [];
    }
    /**
     * @param {?} index
     * @return {?}
     */
    set activeIndex(index) {
        if (this.autocompleteService.isOpen) {
            if (index >= this.items.length) {
                this.restoreIntialActiveIndex();
                return;
            }
            if (index < DEFAULT_ACTIVE_INDEX) {
                this._activeIndex = this.items.length - 1;
                this.autocompleteService.changedHighlightItemSubject.next(this._activeIndex);
                return;
            }
            this._activeIndex = index;
            this.autocompleteService.changedHighlightItemSubject.next(this._activeIndex);
        }
    }
    /**
     * @return {?}
     */
    get activeIndex() {
        return this._activeIndex;
    }
    /**
     * @return {?}
     */
    restoreIntialActiveIndex() {
        this._activeIndex = DEFAULT_ACTIVE_INDEX;
        this.autocompleteService.changedHighlightItemSubject.next(this._activeIndex);
    }
}
ItemListService.decorators = [
    { type: Injectable },
];
ItemListService.ctorParameters = () => [
    { type: AutocompleteService }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
class RemoteAutocompleteComponent {
    /**
     * @param {?} itemListService
     * @param {?} autocompleteService
     */
    constructor(itemListService, autocompleteService) {
        this.itemListService = itemListService;
        this.autocompleteService = autocompleteService;
        this.stopEnterPropagationOnSelect = false;
        this.needToShowNotFoundText = true;
        this.needToShowSearchingText = true;
        this.type = new EventEmitter();
        this.highlighted = new EventEmitter();
        this.selected = new EventEmitter();
        this.blur = new EventEmitter();
        this.focusEvent = new EventEmitter();
        this.searchStates = SearchStateType;
        this.searchState = SearchStateType.Untracked;
        this.SEARCH_WRAPPER_CLASS = SEARCH_WRAPPER_CLASS;
        this.OPTION_LIST_WRAPPER_CLASS = OPTION_LIST_WRAPPER_CLASS;
        this.OPTION_CLASS = OPTION_CLASS;
        this.OPTION_VALUE_CLASS = OPTION_VALUE_CLASS;
        this.OPTION_DESCRIPTION_CLASS = OPTION_DESCRIPTION_CLASS;
        this.LOADING_CLASS = LOADING_CLASS;
        this.RESULTS_NOT_FOUND_CLASS = RESULTS_NOT_FOUND_CLASS;
        this.propagateChange = (/**
         * @param {?} _
         * @return {?}
         */
        (_) => { });
        this.propagateTouched = (/**
         * @param {?} _
         * @return {?}
         */
        (_) => { });
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.validateService();
        this.disabled = this.getDefaultIfNullOrUndefined(this.disabled, false);
        this.minChars = this.getDefaultIfNullOrUndefined(this.minChars, DEFAULT_MIN_SEARCH_LENGTH);
        this.maxChars = this.maxChars || DEFAULT_MAX_CHARS;
        this.pause = this.pause || DEFAULT_PAUSE;
        this.notFoundText = this.notFoundText || NOT_FOUND_TEXT;
        this.searchingText = this.searchingText || SEARCHING_TEXT;
        this.changedHighlightSubscription = this.autocompleteService.changedHighlightItemSubject.subscribe((/**
         * @param {?} index
         * @return {?}
         */
        (index) => {
            this.onActiveIndexChanged(index);
        }));
        this.selectSubscription = this.autocompleteService.selectItemSubject.subscribe((/**
         * @param {?} index
         * @return {?}
         */
        (index) => {
            /** @type {?} */
            const result = this.searchResult[index];
            this.propagateChange(result.value);
            this.selected.emit(result);
            this.close();
        }));
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.changedHighlightSubscription.unsubscribe();
        this.selectSubscription.unsubscribe();
    }
    /**
     * @param {?} value
     * @return {?}
     */
    writeValue(value) {
        if (value !== undefined) {
            this.searchValue = value;
        }
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this.propagateChange = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.propagateTouched = fn;
    }
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    /**
     * @return {?}
     */
    onType() {
        this.propagateChange(this.searchValue);
        this.originalSearchValue = this.searchValue;
        this.type.emit();
        if (this.validsearchTerm()) {
            this.searchState = this.searchStates.Loading;
        }
        else {
            this.close();
        }
        this.resetSearchTimeout();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onInputBlur(event) {
        if (event.relatedTarget) {
            /** @type {?} */
            let related = (/** @type {?} */ (event.relatedTarget));
            if (related.classList.contains(this.OPTION_CLASS)) {
                return;
            }
        }
        this.propagateTouched(this.searchValue);
        this.close();
        this.blur.emit(event);
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onInputFocus(event) {
        this.focusEvent.emit(event);
    }
    /**
     * @return {?}
     */
    get inputClass() {
        /** @type {?} */
        let classes = '';
        if (this.inputClasses) {
            classes = this.inputClasses.join(' ');
        }
        return classes;
    }
    /**
     * @return {?}
     */
    focus() {
        ((/** @type {?} */ (this.inputField.nativeElement))).focus();
    }
    /**
     * @return {?}
     */
    open() {
        this.onType();
    }
    /**
     * @return {?}
     */
    close() {
        this.autocompleteService.isOpen = false;
        this.searchState = this.searchStates.Untracked;
    }
    /**
     * @private
     * @return {?}
     */
    validateService() {
        if (!this.service) {
            throw new Error("AutocompleteService must be implemented");
        }
        if (this.isParameterizedSearch(this.service) && (this.searchParameters === undefined || this.searchParameters === null)) {
            throw new Error("Please provide additionalSearchParams or just provide AutocompleteSourceService instaead of ParameterizedAutocompleteSourceService");
        }
    }
    /**
     * @private
     * @param {?} activeIndex
     * @return {?}
     */
    onActiveIndexChanged(activeIndex) {
        /** @type {?} */
        let highlightedItem;
        if (activeIndex === DEFAULT_ACTIVE_INDEX) {
            highlightedItem = null;
            this.searchValue = this.originalSearchValue;
        }
        else {
            highlightedItem = this.searchResult[activeIndex];
            this.searchValue = highlightedItem.value;
        }
        this.propagateChange(this.searchValue);
        this.highlighted.emit(highlightedItem);
    }
    /**
     * @private
     * @return {?}
     */
    resetSearchTimeout() {
        this.clearSearchTimeout();
        this.setSearchTimeout();
    }
    /**
     * @private
     * @return {?}
     */
    setSearchTimeout() {
        this.typingTimeout = setTimeout(this.search.bind(this), this.pause);
    }
    /**
     * @private
     * @return {?}
     */
    clearSearchTimeout() {
        clearTimeout(this.typingTimeout);
    }
    /**
     * @private
     * @return {?}
     */
    search() {
        this.itemListService.restoreIntialActiveIndex();
        if (this.validsearchTerm()) {
            this.performSearch().first().subscribe((/**
             * @param {?} results
             * @return {?}
             */
            (results) => {
                if (this.searchState !== this.searchStates.Untracked) {
                    this.autocompleteService.isOpen = results.length > 0;
                    this.itemListService.items = results;
                    this.searchResult = results;
                    this.searchState = this.searchStates.Finished;
                }
            }));
        }
    }
    /**
     * @private
     * @return {?}
     */
    performSearch() {
        if (this.isParameterizedSearch(this.service)) {
            return ((/** @type {?} */ (this.service))).getWithParams(this.searchValue, this.searchParameters);
        }
        else {
            return ((/** @type {?} */ (this.service))).get(this.searchValue);
        }
    }
    /**
     * @private
     * @return {?}
     */
    validsearchTerm() {
        return (this.searchValue || '').length >= this.minChars;
    }
    /**
     * @private
     * @param {?} service
     * @return {?}
     */
    isParameterizedSearch(service) {
        return ((/** @type {?} */ (service))).getWithParams !== undefined;
    }
    /**
     * @private
     * @template T
     * @param {?} value
     * @param {?} defaultValue
     * @return {?}
     */
    getDefaultIfNullOrUndefined(value, defaultValue) {
        return value === undefined || value === null
            ? defaultValue
            : value;
    }
}
RemoteAutocompleteComponent.decorators = [
    { type: Component, args: [{
                selector: 'remote-autocomplete',
                template: `<div keyboard-navigation [stopEnterPropagation]="stopEnterPropagationOnSelect" class="remote-autocomplete">
    <input [(ngModel)]="searchValue"
           [attr.id]="inputId"
           [attr.name]="inputName"
           [attr.class]="inputClass"
           [disabled]="disabled"
           [attr.placeholder]="placeholder"
           [attr.autocomplete]="autocompleteAttr"
           [attr.tabindex]="tabindex"
           maxlength="{{maxChars}}"
           (input)="onType()"
           (blur)="onInputBlur($event)"
           (focus)="onInputFocus($event)"
           #input />
    <div *ngIf="searchState === searchStates.Loading && needToShowSearchingText || 
                searchState === searchStates.Finished && (searchResult?.length > 0 || needToShowNotFoundText)" [class]="SEARCH_WRAPPER_CLASS">
        <div *ngIf="searchState === searchStates.Loading">
            <span [class]="LOADING_CLASS">{{searchingText}}</span>
        </div>

        <div *ngIf="searchState === searchStates.Finished && searchResult.length === 0">
            <span [class]="RESULTS_NOT_FOUND_CLASS">{{notFoundText}}</span>
        </div>

        <div *ngIf="searchState === searchStates.Finished && searchResult?.length > 0" [class]="OPTION_LIST_WRAPPER_CLASS">
            <div *ngFor="let item of searchResult; index as i"
                 remote-autocomplete-option
                 [itemIndex]="i"
                 [class]="OPTION_CLASS"
                 [ngClass]="{'autocomplete-option-active': i === itemListService.activeIndex}"
                 tabindex="-1">
                <ng-template #defaultOptionTemplate>
                    <span [class]="OPTION_VALUE_CLASS">{{item.value}}</span>
                    <span *ngIf="item.description" [class]="OPTION_DESCRIPTION_CLASS">{{item.description}}</span>
                </ng-template>

                <ng-template [ngTemplateOutlet]="optionTemplate || defaultOptionTemplate" [ngTemplateOutletContext]="{ $implicit: item }">
                </ng-template>
            </div>
        </div>
    </div>
</div>`,
                styles: [`.autocomplete-search-wrapper{border:1px solid #ccc;max-height:200px;overflow:auto;max-width:200px}.autocomplete-option-active{background-color:#d3d3d3}`],
                providers: [
                    AutocompleteService,
                    ItemListService,
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef((/**
                         * @return {?}
                         */
                        () => RemoteAutocompleteComponent)),
                        multi: true
                    }
                ]
            },] },
];
RemoteAutocompleteComponent.ctorParameters = () => [
    { type: ItemListService },
    { type: AutocompleteService }
];
RemoteAutocompleteComponent.propDecorators = {
    service: [{ type: Input, args: ['service',] }],
    minChars: [{ type: Input, args: ['minSearchLength',] }],
    maxChars: [{ type: Input, args: ['maxChars',] }],
    pause: [{ type: Input, args: ['pause',] }],
    inputId: [{ type: Input, args: ['inputId',] }],
    inputName: [{ type: Input, args: ['inputName',] }],
    inputClasses: [{ type: Input, args: ['inputClass',] }],
    disabled: [{ type: Input, args: ['disabled',] }],
    notFoundText: [{ type: Input, args: ['notFoundText',] }],
    searchingText: [{ type: Input, args: ['searchingText',] }],
    placeholder: [{ type: Input, args: ['placeholder',] }],
    searchParameters: [{ type: Input, args: ['searchParameters',] }],
    autocompleteAttr: [{ type: Input, args: ['autocompleteAttr',] }],
    tabindex: [{ type: Input, args: ['tabindex',] }],
    stopEnterPropagationOnSelect: [{ type: Input, args: ['stopEnterPropagationOnSelect',] }],
    needToShowNotFoundText: [{ type: Input, args: ['needToShowNotFoundText',] }],
    needToShowSearchingText: [{ type: Input, args: ['needToShowSearchingText',] }],
    type: [{ type: Output, args: ['type',] }],
    highlighted: [{ type: Output, args: ['highlighted',] }],
    selected: [{ type: Output, args: ['selected',] }],
    blur: [{ type: Output, args: ['blur',] }],
    focusEvent: [{ type: Output, args: ['focus',] }],
    optionTemplate: [{ type: ContentChild, args: [OptionTemplateDirective, { read: TemplateRef },] }],
    inputField: [{ type: ViewChild, args: ['input',] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
class OptionDirective {
    /**
     * @param {?} autocompleteService
     * @param {?} itemListService
     */
    constructor(autocompleteService, itemListService) {
        this.autocompleteService = autocompleteService;
        this.itemListService = itemListService;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseEnter(event) {
        this.itemListService.activeIndex = this.index;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseLeave(event) {
        this.itemListService.restoreIntialActiveIndex();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onClick(event) {
        this.autocompleteService.selectItemSubject.next(this.index);
    }
}
OptionDirective.decorators = [
    { type: Directive, args: [{
                selector: '[remote-autocomplete-option]',
                host: {
                    '(mouseenter)': 'onMouseEnter($event)',
                    '(mouseleave)': 'onMouseLeave($event)',
                    '(click)': 'onClick($event)'
                }
            },] },
];
OptionDirective.ctorParameters = () => [
    { type: AutocompleteService },
    { type: ItemListService }
];
OptionDirective.propDecorators = {
    index: [{ type: Input, args: ['itemIndex',] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {number} */
const KeyCode = {
    Backspace: 8,
    Tab: 9,
    Enter: 13,
    Shift: 16,
    Ctrl: 17,
    Alt: 18,
    PauseBreak: 19,
    CapsLock: 20,
    Escape: 27,
    Space: 32,
    PageUp: 33,
    PageDown: 34,
    End: 35,
    Home: 36,
    LeftArrow: 37,
    UpArrow: 38,
    RightArrow: 39,
    DownArrow: 40,
    Insert: 45,
    Delete: 46,
    Zero: 48,
    ClosedParen: 48,
    One: 49,
    ExclamationMark: 49,
    Two: 50,
    AtSign: 50,
    Three: 51,
    PoundSign: 51,
    Hash: 51,
    Four: 52,
    DollarSign: 52,
    Five: 53,
    PercentSign: 53,
    Six: 54,
    Caret: 54,
    Hat: 54,
    Seven: 55,
    Ampersand: 55,
    Eight: 56,
    Star: 56,
    Asterik: 56,
    Nine: 57,
    OpenParen: 57,
    A: 65,
    B: 66,
    C: 67,
    D: 68,
    E: 69,
    F: 70,
    G: 71,
    H: 72,
    I: 73,
    J: 74,
    K: 75,
    L: 76,
    M: 77,
    N: 78,
    O: 79,
    P: 80,
    Q: 81,
    R: 82,
    S: 83,
    T: 84,
    U: 85,
    V: 86,
    W: 87,
    X: 88,
    Y: 89,
    Z: 90,
    LeftWindowKey: 91,
    RightWindowKey: 92,
    SelectKey: 93,
    Numpad0: 96,
    Numpad1: 97,
    Numpad2: 98,
    Numpad3: 99,
    Numpad4: 100,
    Numpad5: 101,
    Numpad6: 102,
    Numpad7: 103,
    Numpad8: 104,
    Numpad9: 105,
    Multiply: 106,
    Add: 107,
    Subtract: 109,
    DecimalPoint: 110,
    Divide: 111,
    F1: 112,
    F2: 113,
    F3: 114,
    F4: 115,
    F5: 116,
    F6: 117,
    F7: 118,
    F8: 119,
    F9: 120,
    F10: 121,
    F11: 122,
    F12: 123,
    NumLock: 144,
    ScrollLock: 145,
    SemiColon: 186,
    Equals: 187,
    Comma: 188,
    Dash: 189,
    Period: 190,
    UnderScore: 189,
    PlusSign: 187,
    ForwardSlash: 191,
    Tilde: 192,
    GraveAccent: 192,
    OpenBracket: 219,
    ClosedBracket: 221,
    Quote: 222,
};
KeyCode[KeyCode.Backspace] = 'Backspace';
KeyCode[KeyCode.Tab] = 'Tab';
KeyCode[KeyCode.Enter] = 'Enter';
KeyCode[KeyCode.Shift] = 'Shift';
KeyCode[KeyCode.Ctrl] = 'Ctrl';
KeyCode[KeyCode.Alt] = 'Alt';
KeyCode[KeyCode.PauseBreak] = 'PauseBreak';
KeyCode[KeyCode.CapsLock] = 'CapsLock';
KeyCode[KeyCode.Escape] = 'Escape';
KeyCode[KeyCode.Space] = 'Space';
KeyCode[KeyCode.PageUp] = 'PageUp';
KeyCode[KeyCode.PageDown] = 'PageDown';
KeyCode[KeyCode.End] = 'End';
KeyCode[KeyCode.Home] = 'Home';
KeyCode[KeyCode.LeftArrow] = 'LeftArrow';
KeyCode[KeyCode.UpArrow] = 'UpArrow';
KeyCode[KeyCode.RightArrow] = 'RightArrow';
KeyCode[KeyCode.DownArrow] = 'DownArrow';
KeyCode[KeyCode.Insert] = 'Insert';
KeyCode[KeyCode.Delete] = 'Delete';
KeyCode[KeyCode.Zero] = 'Zero';
KeyCode[KeyCode.ClosedParen] = 'ClosedParen';
KeyCode[KeyCode.One] = 'One';
KeyCode[KeyCode.ExclamationMark] = 'ExclamationMark';
KeyCode[KeyCode.Two] = 'Two';
KeyCode[KeyCode.AtSign] = 'AtSign';
KeyCode[KeyCode.Three] = 'Three';
KeyCode[KeyCode.PoundSign] = 'PoundSign';
KeyCode[KeyCode.Hash] = 'Hash';
KeyCode[KeyCode.Four] = 'Four';
KeyCode[KeyCode.DollarSign] = 'DollarSign';
KeyCode[KeyCode.Five] = 'Five';
KeyCode[KeyCode.PercentSign] = 'PercentSign';
KeyCode[KeyCode.Six] = 'Six';
KeyCode[KeyCode.Caret] = 'Caret';
KeyCode[KeyCode.Hat] = 'Hat';
KeyCode[KeyCode.Seven] = 'Seven';
KeyCode[KeyCode.Ampersand] = 'Ampersand';
KeyCode[KeyCode.Eight] = 'Eight';
KeyCode[KeyCode.Star] = 'Star';
KeyCode[KeyCode.Asterik] = 'Asterik';
KeyCode[KeyCode.Nine] = 'Nine';
KeyCode[KeyCode.OpenParen] = 'OpenParen';
KeyCode[KeyCode.A] = 'A';
KeyCode[KeyCode.B] = 'B';
KeyCode[KeyCode.C] = 'C';
KeyCode[KeyCode.D] = 'D';
KeyCode[KeyCode.E] = 'E';
KeyCode[KeyCode.F] = 'F';
KeyCode[KeyCode.G] = 'G';
KeyCode[KeyCode.H] = 'H';
KeyCode[KeyCode.I] = 'I';
KeyCode[KeyCode.J] = 'J';
KeyCode[KeyCode.K] = 'K';
KeyCode[KeyCode.L] = 'L';
KeyCode[KeyCode.M] = 'M';
KeyCode[KeyCode.N] = 'N';
KeyCode[KeyCode.O] = 'O';
KeyCode[KeyCode.P] = 'P';
KeyCode[KeyCode.Q] = 'Q';
KeyCode[KeyCode.R] = 'R';
KeyCode[KeyCode.S] = 'S';
KeyCode[KeyCode.T] = 'T';
KeyCode[KeyCode.U] = 'U';
KeyCode[KeyCode.V] = 'V';
KeyCode[KeyCode.W] = 'W';
KeyCode[KeyCode.X] = 'X';
KeyCode[KeyCode.Y] = 'Y';
KeyCode[KeyCode.Z] = 'Z';
KeyCode[KeyCode.LeftWindowKey] = 'LeftWindowKey';
KeyCode[KeyCode.RightWindowKey] = 'RightWindowKey';
KeyCode[KeyCode.SelectKey] = 'SelectKey';
KeyCode[KeyCode.Numpad0] = 'Numpad0';
KeyCode[KeyCode.Numpad1] = 'Numpad1';
KeyCode[KeyCode.Numpad2] = 'Numpad2';
KeyCode[KeyCode.Numpad3] = 'Numpad3';
KeyCode[KeyCode.Numpad4] = 'Numpad4';
KeyCode[KeyCode.Numpad5] = 'Numpad5';
KeyCode[KeyCode.Numpad6] = 'Numpad6';
KeyCode[KeyCode.Numpad7] = 'Numpad7';
KeyCode[KeyCode.Numpad8] = 'Numpad8';
KeyCode[KeyCode.Numpad9] = 'Numpad9';
KeyCode[KeyCode.Multiply] = 'Multiply';
KeyCode[KeyCode.Add] = 'Add';
KeyCode[KeyCode.Subtract] = 'Subtract';
KeyCode[KeyCode.DecimalPoint] = 'DecimalPoint';
KeyCode[KeyCode.Divide] = 'Divide';
KeyCode[KeyCode.F1] = 'F1';
KeyCode[KeyCode.F2] = 'F2';
KeyCode[KeyCode.F3] = 'F3';
KeyCode[KeyCode.F4] = 'F4';
KeyCode[KeyCode.F5] = 'F5';
KeyCode[KeyCode.F6] = 'F6';
KeyCode[KeyCode.F7] = 'F7';
KeyCode[KeyCode.F8] = 'F8';
KeyCode[KeyCode.F9] = 'F9';
KeyCode[KeyCode.F10] = 'F10';
KeyCode[KeyCode.F11] = 'F11';
KeyCode[KeyCode.F12] = 'F12';
KeyCode[KeyCode.NumLock] = 'NumLock';
KeyCode[KeyCode.ScrollLock] = 'ScrollLock';
KeyCode[KeyCode.SemiColon] = 'SemiColon';
KeyCode[KeyCode.Equals] = 'Equals';
KeyCode[KeyCode.Comma] = 'Comma';
KeyCode[KeyCode.Dash] = 'Dash';
KeyCode[KeyCode.Period] = 'Period';
KeyCode[KeyCode.UnderScore] = 'UnderScore';
KeyCode[KeyCode.PlusSign] = 'PlusSign';
KeyCode[KeyCode.ForwardSlash] = 'ForwardSlash';
KeyCode[KeyCode.Tilde] = 'Tilde';
KeyCode[KeyCode.GraveAccent] = 'GraveAccent';
KeyCode[KeyCode.OpenBracket] = 'OpenBracket';
KeyCode[KeyCode.ClosedBracket] = 'ClosedBracket';
KeyCode[KeyCode.Quote] = 'Quote';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
class ScrollService {
    /**
     * @param {?} element
     */
    constructor(element) {
        this.element = element;
    }
    /**
     * @param {?} activeIndex
     * @return {?}
     */
    handleKeyboarOptionNavigation(activeIndex) {
        /** @type {?} */
        const autocompleteElement = (/** @type {?} */ (this.element.nativeElement));
        /** @type {?} */
        const listElement = autocompleteElement.querySelector(`.${SEARCH_WRAPPER_CLASS}`);
        if (listElement) {
            if (activeIndex === DEFAULT_ACTIVE_INDEX) {
                listElement.scrollTo(0, 0);
                return;
            }
            /** @type {?} */
            const optionElements = listElement.querySelectorAll(`.${OPTION_CLASS}`);
            /** @type {?} */
            const activeElement = optionElements[activeIndex];
            /** @type {?} */
            const listTop = listElement.getBoundingClientRect().top;
            /** @type {?} */
            const listBottom = listTop + listElement.clientHeight;
            /** @type {?} */
            const elementTop = activeElement.getBoundingClientRect().top;
            /** @type {?} */
            const elementBottom = elementTop + activeElement.clientHeight;
            if (listTop > elementTop) {
                activeElement.scrollIntoView(true);
            }
            if (listBottom < elementBottom) {
                activeElement.scrollIntoView(false);
            }
        }
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
class KeyboardNavigationDirective {
    /**
     * @param {?} autocompleteService
     * @param {?} itemListService
     * @param {?} element
     */
    constructor(autocompleteService, itemListService, element) {
        this.autocompleteService = autocompleteService;
        this.itemListService = itemListService;
        this.element = element;
        this.stopEnterPropagation = false;
        this.scrollService = new ScrollService(element);
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onKeydown(event) {
        /** @type {?} */
        let key = event.which || event.keyCode;
        switch (key) {
            case KeyCode.DownArrow:
                this.handleDownKey(event);
                break;
            case KeyCode.UpArrow:
                this.handleUpKey(event);
                break;
            case KeyCode.Enter:
                this.handleEnter(event);
                break;
        }
    }
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    handleDownKey(event) {
        this.itemListService.activeIndex++;
        this.scrollService.handleKeyboarOptionNavigation(this.itemListService.activeIndex);
    }
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    handleUpKey(event) {
        this.itemListService.activeIndex--;
        this.scrollService.handleKeyboarOptionNavigation(this.itemListService.activeIndex);
    }
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    handleEnter(event) {
        if (this.itemListService.activeIndex >= 0) {
            this.autocompleteService.selectItemSubject.next(this.itemListService.activeIndex);
            event.preventDefault();
            if (this.stopEnterPropagation) {
                event.stopPropagation();
            }
        }
    }
}
KeyboardNavigationDirective.decorators = [
    { type: Directive, args: [{
                selector: '[keyboard-navigation]'
            },] },
];
KeyboardNavigationDirective.ctorParameters = () => [
    { type: AutocompleteService },
    { type: ItemListService },
    { type: ElementRef }
];
KeyboardNavigationDirective.propDecorators = {
    stopEnterPropagation: [{ type: Input }],
    onKeydown: [{ type: HostListener, args: ['keydown', ['$event'],] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
class RemoteAutocompleteModule {
}
RemoteAutocompleteModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    FormsModule
                ],
                declarations: [
                    RemoteAutocompleteComponent,
                    OptionTemplateDirective,
                    OptionDirective,
                    KeyboardNavigationDirective
                ],
                exports: [
                    RemoteAutocompleteComponent,
                    OptionTemplateDirective
                ],
            },] },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

export { RemoteAutocompleteModule, RemoteAutocompleteComponent, OptionTemplateDirective, KeyboardNavigationDirective as ɵd, OptionDirective as ɵc, AutocompleteService as ɵa, ItemListService as ɵb };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctcmVtb3RlLWF1dG9jb21wbGV0ZS5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vbmctcmVtb3RlLWF1dG9jb21wbGV0ZS9hcHAvY29uc3RhbnRzL2F1dG9jb21wbGV0ZS5jb25zdGFudHMudHMiLCJuZzovL25nLXJlbW90ZS1hdXRvY29tcGxldGUvYXBwL2VudW1zL3NlYXJjaC1zdGF0ZS50eXBlLnRzIiwibmc6Ly9uZy1yZW1vdGUtYXV0b2NvbXBsZXRlL2FwcC9kaXJlY3RpdmVzL29wdGlvbi10ZW1wbGF0ZS5kaXJlY3RpdmUudHMiLCJuZzovL25nLXJlbW90ZS1hdXRvY29tcGxldGUvYXBwL3NlcnZpY2VzL2F1dG9jb21wbGV0ZS5zZXJ2aWNlLnRzIiwibmc6Ly9uZy1yZW1vdGUtYXV0b2NvbXBsZXRlL2FwcC9zZXJ2aWNlcy9pdGVtLWxpc3Quc2VydmljZS50cyIsIm5nOi8vbmctcmVtb3RlLWF1dG9jb21wbGV0ZS9hcHAvY29tcG9uZW50cy9hdXRvY29tcGxldGUuY29tcG9uZW50LnRzIiwibmc6Ly9uZy1yZW1vdGUtYXV0b2NvbXBsZXRlL2FwcC9kaXJlY3RpdmVzL29wdGlvbi1kaXJlY3RpdmUudHMiLCJuZzovL25nLXJlbW90ZS1hdXRvY29tcGxldGUvYXBwL2VudW1zL2tleS1rb2RlLnRzIiwibmc6Ly9uZy1yZW1vdGUtYXV0b2NvbXBsZXRlL2FwcC9zZXJ2aWNlcy9zY3JvbGwtc2VydmljZS50cyIsIm5nOi8vbmctcmVtb3RlLWF1dG9jb21wbGV0ZS9hcHAvZGlyZWN0aXZlcy9rZXlib2FyZC1uYXZpZ2F0aW9uLmRpcmVjdGl2ZS50cyIsIm5nOi8vbmctcmVtb3RlLWF1dG9jb21wbGV0ZS9hcHAvYXV0b2NvbXBsZXRlLm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgREVGQVVMVF9BQ1RJVkVfSU5ERVg6IG51bWJlciA9IC0xO1xyXG5leHBvcnQgY29uc3QgREVGQVVMVF9NSU5fU0VBUkNIX0xFTkdUSDogbnVtYmVyID0gMTtcclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfTUFYX0NIQVJTOiBudW1iZXIgPSAyMTQ3NDgzNjQ3O1xyXG5leHBvcnQgY29uc3QgREVGQVVMVF9QQVVTRTogbnVtYmVyID0gMTAwO1xyXG5cclxuZXhwb3J0IGNvbnN0IE5PVF9GT1VORF9URVhUOiBzdHJpbmcgPSBcIk5vIHJlc3VsdHMgZm91bmRcIjtcclxuZXhwb3J0IGNvbnN0IFNFQVJDSElOR19URVhUOiBzdHJpbmcgPSBcIlNlYXJjaGluZy4uLlwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IFNFQVJDSF9XUkFQUEVSX0NMQVNTOiBzdHJpbmcgPSBcImF1dG9jb21wbGV0ZS1zZWFyY2gtd3JhcHBlclwiO1xyXG5leHBvcnQgY29uc3QgT1BUSU9OX1ZBTFVFX0NMQVNTOiBzdHJpbmcgPSBcImF1dG9jb21wbGV0ZS1vcHRpb24tdmFsdWVcIjtcclxuZXhwb3J0IGNvbnN0IE9QVElPTl9ERVNDUklQVElPTl9DTEFTUzogc3RyaW5nID0gXCJhdXRvY29tcGxldGUtb3B0aW9uLWRlc2NyaXB0aW9uXCI7XHJcbmV4cG9ydCBjb25zdCBPUFRJT05fQ0xBU1M6IHN0cmluZyA9IFwiYXV0b2NvbXBsZXRlLW9wdGlvblwiO1xyXG5leHBvcnQgY29uc3QgT1BUSU9OX0xJU1RfV1JBUFBFUl9DTEFTUzogc3RyaW5nID0gXCJvcHRpb24tbGlzdC13cmFwcGVyXCI7XHJcbmV4cG9ydCBjb25zdCBMT0FESU5HX0NMQVNTOiBzdHJpbmcgPSBcImF1dG9jb21wbGV0ZS1sb2FkaW5nXCI7XHJcbmV4cG9ydCBjb25zdCBSRVNVTFRTX05PVF9GT1VORF9DTEFTUzogc3RyaW5nID0gXCJhdXRvY29tcGxldGUtbm90LWZvdW5kXCI7IiwiZXhwb3J0IGVudW0gU2VhcmNoU3RhdGVUeXBlIHtcclxuICAgIFVudHJhY2tlZCxcclxuICAgIExvYWRpbmcsXHJcbiAgICBGaW5pc2hlZFxyXG59IiwiaW1wb3J0IHsgRGlyZWN0aXZlLCBUZW1wbGF0ZVJlZiB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW3JlbW90ZS1hdXRvY29tcGxldGUtb3B0aW9uLXRtcGxdJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgT3B0aW9uVGVtcGxhdGVEaXJlY3RpdmUge1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIHRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+KSB7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gXCJyeGpzL1N1YmplY3RcIjtcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIEF1dG9jb21wbGV0ZVNlcnZpY2Uge1xyXG4gICAgcHVibGljIGNoYW5nZWRIaWdobGlnaHRJdGVtU3ViamVjdDogU3ViamVjdDxudW1iZXI+ID0gbmV3IFN1YmplY3Q8bnVtYmVyPigpO1xyXG4gICAgcHVibGljIHNlbGVjdEl0ZW1TdWJqZWN0OiBTdWJqZWN0PG51bWJlcj4gPSBuZXcgU3ViamVjdDxudW1iZXI+KCk7XHJcblxyXG4gICAgcHJpdmF0ZSBfaXNPcGVuOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgc2V0IGlzT3Blbih2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2lzT3BlbiA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc09wZW4oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzT3BlbjtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xyXG5cclxuaW1wb3J0IHsgQXV0b2NvbXBsZXRlU2VydmljZSB9IGZyb20gXCIuL2F1dG9jb21wbGV0ZS5zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IERFRkFVTFRfQUNUSVZFX0lOREVYIH0gZnJvbSBcIi4uL2NvbnN0YW50cy9hdXRvY29tcGxldGUuY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IEF1dG9jb21wbGV0ZUl0ZW0gfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9hdXRvY29tcGxldGUuaXRlbVwiO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgSXRlbUxpc3RTZXJ2aWNlIHtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYXV0b2NvbXBsZXRlU2VydmljZTogQXV0b2NvbXBsZXRlU2VydmljZSkge1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2FjdGl2ZUluZGV4OiBudW1iZXIgPSBERUZBVUxUX0FDVElWRV9JTkRFWDtcclxuXHJcbiAgICBwdWJsaWMgaXRlbXM6IEF1dG9jb21wbGV0ZUl0ZW1bXSA9IFtdO1xyXG5cclxuICAgIHNldCBhY3RpdmVJbmRleChpbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0b2NvbXBsZXRlU2VydmljZS5pc09wZW4pIHtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID49IHRoaXMuaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3RvcmVJbnRpYWxBY3RpdmVJbmRleCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKGluZGV4IDwgREVGQVVMVF9BQ1RJVkVfSU5ERVgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2FjdGl2ZUluZGV4ID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRvY29tcGxldGVTZXJ2aWNlLmNoYW5nZWRIaWdobGlnaHRJdGVtU3ViamVjdC5uZXh0KHRoaXMuX2FjdGl2ZUluZGV4KTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fYWN0aXZlSW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgdGhpcy5hdXRvY29tcGxldGVTZXJ2aWNlLmNoYW5nZWRIaWdobGlnaHRJdGVtU3ViamVjdC5uZXh0KHRoaXMuX2FjdGl2ZUluZGV4KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFjdGl2ZUluZGV4KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGl2ZUluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHJlc3RvcmVJbnRpYWxBY3RpdmVJbmRleCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9hY3RpdmVJbmRleCA9IERFRkFVTFRfQUNUSVZFX0lOREVYO1xyXG4gICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlU2VydmljZS5jaGFuZ2VkSGlnaGxpZ2h0SXRlbVN1YmplY3QubmV4dCh0aGlzLl9hY3RpdmVJbmRleCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LFxyXG4gICAgT25Jbml0LFxyXG4gICAgSW5wdXQsXHJcbiAgICBPdXRwdXQsXHJcbiAgICBFdmVudEVtaXR0ZXIsXHJcbiAgICBDb250ZW50Q2hpbGQsXHJcbiAgICBUZW1wbGF0ZVJlZixcclxuICAgIE9uRGVzdHJveSxcclxuICAgIGZvcndhcmRSZWYsXHJcbiAgICBWaWV3Q2hpbGQsXHJcbiAgICBFbGVtZW50UmVmXHJcbn0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuXHJcbmltcG9ydCB7IENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gXCJAYW5ndWxhci9mb3Jtc1wiO1xyXG5cclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcy9SeCc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tIFwicnhqcy9PYnNlcnZhYmxlXCI7XHJcblxyXG5pbXBvcnQgeyBBdXRvY29tcGxldGVJdGVtIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvYXV0b2NvbXBsZXRlLml0ZW1cIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgICBERUZBVUxUX01BWF9DSEFSUyxcclxuICAgIERFRkFVTFRfTUlOX1NFQVJDSF9MRU5HVEgsXHJcbiAgICBERUZBVUxUX1BBVVNFLFxyXG4gICAgTk9UX0ZPVU5EX1RFWFQsXHJcbiAgICBTRUFSQ0hJTkdfVEVYVCxcclxuICAgIERFRkFVTFRfQUNUSVZFX0lOREVYLFxyXG4gICAgU0VBUkNIX1dSQVBQRVJfQ0xBU1MsXHJcbiAgICBPUFRJT05fTElTVF9XUkFQUEVSX0NMQVNTLFxyXG4gICAgT1BUSU9OX0NMQVNTLFxyXG4gICAgT1BUSU9OX1ZBTFVFX0NMQVNTLFxyXG4gICAgT1BUSU9OX0RFU0NSSVBUSU9OX0NMQVNTLFxyXG4gICAgTE9BRElOR19DTEFTUyxcclxuICAgIFJFU1VMVFNfTk9UX0ZPVU5EX0NMQVNTXHJcbn0gZnJvbSBcIi4uL2NvbnN0YW50cy9hdXRvY29tcGxldGUuY29uc3RhbnRzXCI7XHJcblxyXG5pbXBvcnQgeyBTZWFyY2hTdGF0ZVR5cGUgfSBmcm9tIFwiLi4vZW51bXMvc2VhcmNoLXN0YXRlLnR5cGVcIjtcclxuaW1wb3J0IHsgT3B0aW9uVGVtcGxhdGVEaXJlY3RpdmUgfSBmcm9tIFwiLi4vZGlyZWN0aXZlcy9vcHRpb24tdGVtcGxhdGUuZGlyZWN0aXZlXCI7XHJcbmltcG9ydCB7IEl0ZW1MaXN0U2VydmljZSB9IGZyb20gXCIuLi9zZXJ2aWNlcy9pdGVtLWxpc3Quc2VydmljZVwiO1xyXG5pbXBvcnQgeyBBdXRvY29tcGxldGVTb3VyY2VTZXJ2aWNlIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvYXV0b2NvbXBsZXRlLXNvdXJjZS5zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IEF1dG9jb21wbGV0ZVNlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZXMvYXV0b2NvbXBsZXRlLnNlcnZpY2VcIjtcclxuaW1wb3J0IHsgUGFyYW1ldGVyaXplZEF1dG9jb21wbGV0ZVNvdXJjZVNlcnZpY2UgfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9wYXJhbWV0ZXJpemVkLWF1dG9jb21wbGV0ZS1zb3Vyc2Uuc2VydmlzZVwiO1xyXG5pbXBvcnQgeyBBdXRvY29tcGxldGUgfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9hdXRvY29tcGxldGVcIjtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdyZW1vdGUtYXV0b2NvbXBsZXRlJyxcclxuICAgIHRlbXBsYXRlOiBgPGRpdiBrZXlib2FyZC1uYXZpZ2F0aW9uIFtzdG9wRW50ZXJQcm9wYWdhdGlvbl09XCJzdG9wRW50ZXJQcm9wYWdhdGlvbk9uU2VsZWN0XCIgY2xhc3M9XCJyZW1vdGUtYXV0b2NvbXBsZXRlXCI+XHJcbiAgICA8aW5wdXQgWyhuZ01vZGVsKV09XCJzZWFyY2hWYWx1ZVwiXHJcbiAgICAgICAgICAgW2F0dHIuaWRdPVwiaW5wdXRJZFwiXHJcbiAgICAgICAgICAgW2F0dHIubmFtZV09XCJpbnB1dE5hbWVcIlxyXG4gICAgICAgICAgIFthdHRyLmNsYXNzXT1cImlucHV0Q2xhc3NcIlxyXG4gICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXHJcbiAgICAgICAgICAgW2F0dHIucGxhY2Vob2xkZXJdPVwicGxhY2Vob2xkZXJcIlxyXG4gICAgICAgICAgIFthdHRyLmF1dG9jb21wbGV0ZV09XCJhdXRvY29tcGxldGVBdHRyXCJcclxuICAgICAgICAgICBbYXR0ci50YWJpbmRleF09XCJ0YWJpbmRleFwiXHJcbiAgICAgICAgICAgbWF4bGVuZ3RoPVwie3ttYXhDaGFyc319XCJcclxuICAgICAgICAgICAoaW5wdXQpPVwib25UeXBlKClcIlxyXG4gICAgICAgICAgIChibHVyKT1cIm9uSW5wdXRCbHVyKCRldmVudClcIlxyXG4gICAgICAgICAgIChmb2N1cyk9XCJvbklucHV0Rm9jdXMoJGV2ZW50KVwiXHJcbiAgICAgICAgICAgI2lucHV0IC8+XHJcbiAgICA8ZGl2ICpuZ0lmPVwic2VhcmNoU3RhdGUgPT09IHNlYXJjaFN0YXRlcy5Mb2FkaW5nICYmIG5lZWRUb1Nob3dTZWFyY2hpbmdUZXh0IHx8IFxyXG4gICAgICAgICAgICAgICAgc2VhcmNoU3RhdGUgPT09IHNlYXJjaFN0YXRlcy5GaW5pc2hlZCAmJiAoc2VhcmNoUmVzdWx0Py5sZW5ndGggPiAwIHx8IG5lZWRUb1Nob3dOb3RGb3VuZFRleHQpXCIgW2NsYXNzXT1cIlNFQVJDSF9XUkFQUEVSX0NMQVNTXCI+XHJcbiAgICAgICAgPGRpdiAqbmdJZj1cInNlYXJjaFN0YXRlID09PSBzZWFyY2hTdGF0ZXMuTG9hZGluZ1wiPlxyXG4gICAgICAgICAgICA8c3BhbiBbY2xhc3NdPVwiTE9BRElOR19DTEFTU1wiPnt7c2VhcmNoaW5nVGV4dH19PC9zcGFuPlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICA8ZGl2ICpuZ0lmPVwic2VhcmNoU3RhdGUgPT09IHNlYXJjaFN0YXRlcy5GaW5pc2hlZCAmJiBzZWFyY2hSZXN1bHQubGVuZ3RoID09PSAwXCI+XHJcbiAgICAgICAgICAgIDxzcGFuIFtjbGFzc109XCJSRVNVTFRTX05PVF9GT1VORF9DTEFTU1wiPnt7bm90Rm91bmRUZXh0fX08L3NwYW4+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxkaXYgKm5nSWY9XCJzZWFyY2hTdGF0ZSA9PT0gc2VhcmNoU3RhdGVzLkZpbmlzaGVkICYmIHNlYXJjaFJlc3VsdD8ubGVuZ3RoID4gMFwiIFtjbGFzc109XCJPUFRJT05fTElTVF9XUkFQUEVSX0NMQVNTXCI+XHJcbiAgICAgICAgICAgIDxkaXYgKm5nRm9yPVwibGV0IGl0ZW0gb2Ygc2VhcmNoUmVzdWx0OyBpbmRleCBhcyBpXCJcclxuICAgICAgICAgICAgICAgICByZW1vdGUtYXV0b2NvbXBsZXRlLW9wdGlvblxyXG4gICAgICAgICAgICAgICAgIFtpdGVtSW5kZXhdPVwiaVwiXHJcbiAgICAgICAgICAgICAgICAgW2NsYXNzXT1cIk9QVElPTl9DTEFTU1wiXHJcbiAgICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwieydhdXRvY29tcGxldGUtb3B0aW9uLWFjdGl2ZSc6IGkgPT09IGl0ZW1MaXN0U2VydmljZS5hY3RpdmVJbmRleH1cIlxyXG4gICAgICAgICAgICAgICAgIHRhYmluZGV4PVwiLTFcIj5cclxuICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjZGVmYXVsdE9wdGlvblRlbXBsYXRlPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIFtjbGFzc109XCJPUFRJT05fVkFMVUVfQ0xBU1NcIj57e2l0ZW0udmFsdWV9fTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiAqbmdJZj1cIml0ZW0uZGVzY3JpcHRpb25cIiBbY2xhc3NdPVwiT1BUSU9OX0RFU0NSSVBUSU9OX0NMQVNTXCI+e3tpdGVtLmRlc2NyaXB0aW9ufX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxyXG5cclxuICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJvcHRpb25UZW1wbGF0ZSB8fCBkZWZhdWx0T3B0aW9uVGVtcGxhdGVcIiBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVwieyAkaW1wbGljaXQ6IGl0ZW0gfVwiPlxyXG4gICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuPC9kaXY+YCxcclxuICAgIHN0eWxlczogW2AuYXV0b2NvbXBsZXRlLXNlYXJjaC13cmFwcGVye2JvcmRlcjoxcHggc29saWQgI2NjYzttYXgtaGVpZ2h0OjIwMHB4O292ZXJmbG93OmF1dG87bWF4LXdpZHRoOjIwMHB4fS5hdXRvY29tcGxldGUtb3B0aW9uLWFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiNkM2QzZDN9YF0sXHJcbiAgICBwcm92aWRlcnM6IFtcclxuICAgICAgICBBdXRvY29tcGxldGVTZXJ2aWNlLFxyXG4gICAgICAgIEl0ZW1MaXN0U2VydmljZSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBSZW1vdGVBdXRvY29tcGxldGVDb21wb25lbnQpLFxyXG4gICAgICAgICAgICBtdWx0aTogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgIF1cclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBSZW1vdGVBdXRvY29tcGxldGVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSwgQ29udHJvbFZhbHVlQWNjZXNzb3IsIEF1dG9jb21wbGV0ZSB7XHJcbiAgICBASW5wdXQoJ3NlcnZpY2UnKSBzZXJ2aWNlOiBBdXRvY29tcGxldGVTb3VyY2VTZXJ2aWNlIHwgUGFyYW1ldGVyaXplZEF1dG9jb21wbGV0ZVNvdXJjZVNlcnZpY2U7XHJcbiAgICBASW5wdXQoJ21pblNlYXJjaExlbmd0aCcpIG1pbkNoYXJzOiBudW1iZXI7XHJcbiAgICBASW5wdXQoJ21heENoYXJzJykgbWF4Q2hhcnM6IG51bWJlcjtcclxuICAgIEBJbnB1dCgncGF1c2UnKSBwYXVzZTogbnVtYmVyO1xyXG4gICAgQElucHV0KCdpbnB1dElkJykgaW5wdXRJZDogc3RyaW5nO1xyXG4gICAgQElucHV0KCdpbnB1dE5hbWUnKSBpbnB1dE5hbWU6IHN0cmluZztcclxuICAgIEBJbnB1dCgnaW5wdXRDbGFzcycpIGlucHV0Q2xhc3Nlczogc3RyaW5nW107XHJcbiAgICBASW5wdXQoJ2Rpc2FibGVkJykgZGlzYWJsZWQ6IGJvb2xlYW47XHJcbiAgICBASW5wdXQoJ25vdEZvdW5kVGV4dCcpIG5vdEZvdW5kVGV4dDogc3RyaW5nO1xyXG4gICAgQElucHV0KCdzZWFyY2hpbmdUZXh0Jykgc2VhcmNoaW5nVGV4dDogc3RyaW5nO1xyXG4gICAgQElucHV0KCdwbGFjZWhvbGRlcicpIHBsYWNlaG9sZGVyOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoJ3NlYXJjaFBhcmFtZXRlcnMnKSBzZWFyY2hQYXJhbWV0ZXJzOiBhbnk7XHJcbiAgICBASW5wdXQoJ2F1dG9jb21wbGV0ZUF0dHInKSBhdXRvY29tcGxldGVBdHRyOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoJ3RhYmluZGV4JykgdGFiaW5kZXg6IG51bWJlcjtcclxuICAgIEBJbnB1dCgnc3RvcEVudGVyUHJvcGFnYXRpb25PblNlbGVjdCcpIHN0b3BFbnRlclByb3BhZ2F0aW9uT25TZWxlY3Q6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRASW5wdXQoJ25lZWRUb1Nob3dOb3RGb3VuZFRleHQnKSBuZWVkVG9TaG93Tm90Rm91bmRUZXh0OiBib29sZWFuID0gdHJ1ZTtcclxuXHRASW5wdXQoJ25lZWRUb1Nob3dTZWFyY2hpbmdUZXh0JykgbmVlZFRvU2hvd1NlYXJjaGluZ1RleHQ6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICAgIEBPdXRwdXQoJ3R5cGUnKSB0eXBlOiBFdmVudEVtaXR0ZXI8dm9pZD4gPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XHJcbiAgICBAT3V0cHV0KCdoaWdobGlnaHRlZCcpIGhpZ2hsaWdodGVkOiBFdmVudEVtaXR0ZXI8QXV0b2NvbXBsZXRlSXRlbT4gPSBuZXcgRXZlbnRFbWl0dGVyPEF1dG9jb21wbGV0ZUl0ZW0+KCk7XHJcbiAgICBAT3V0cHV0KCdzZWxlY3RlZCcpIHNlbGVjdGVkOiBFdmVudEVtaXR0ZXI8QXV0b2NvbXBsZXRlSXRlbT4gPSBuZXcgRXZlbnRFbWl0dGVyPEF1dG9jb21wbGV0ZUl0ZW0+KCk7XHJcbiAgICBAT3V0cHV0KCdibHVyJykgYmx1cjogRXZlbnRFbWl0dGVyPEV2ZW50PiA9IG5ldyBFdmVudEVtaXR0ZXI8RXZlbnQ+KCk7XHJcbiAgICBAT3V0cHV0KCdmb2N1cycpIGZvY3VzRXZlbnQ6IEV2ZW50RW1pdHRlcjxFdmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyPEV2ZW50PigpO1xyXG5cclxuICAgIC8vY3VzdG9tIHRlbXBsYXRlXHJcbiAgICBAQ29udGVudENoaWxkKE9wdGlvblRlbXBsYXRlRGlyZWN0aXZlLCB7IHJlYWQ6IFRlbXBsYXRlUmVmIH0pIG9wdGlvblRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2lucHV0JykgaW5wdXRGaWVsZDogRWxlbWVudFJlZjtcclxuXHJcbiAgICBwdWJsaWMgc2VhcmNoU3RhdGVzID0gU2VhcmNoU3RhdGVUeXBlO1xyXG4gICAgcHVibGljIHNlYXJjaFN0YXRlID0gU2VhcmNoU3RhdGVUeXBlLlVudHJhY2tlZDtcclxuICAgIHB1YmxpYyBzZWFyY2hWYWx1ZTogc3RyaW5nO1xyXG4gICAgcHVibGljIHNlYXJjaFJlc3VsdDogQXV0b2NvbXBsZXRlSXRlbVtdO1xyXG4gICAgcHVibGljIFNFQVJDSF9XUkFQUEVSX0NMQVNTOiBzdHJpbmcgPSBTRUFSQ0hfV1JBUFBFUl9DTEFTUztcclxuICAgIHB1YmxpYyBPUFRJT05fTElTVF9XUkFQUEVSX0NMQVNTOiBzdHJpbmcgPSBPUFRJT05fTElTVF9XUkFQUEVSX0NMQVNTO1xyXG4gICAgcHVibGljIE9QVElPTl9DTEFTUzogc3RyaW5nID0gT1BUSU9OX0NMQVNTO1xyXG4gICAgcHVibGljIE9QVElPTl9WQUxVRV9DTEFTUzogc3RyaW5nID0gT1BUSU9OX1ZBTFVFX0NMQVNTO1xyXG4gICAgcHVibGljIE9QVElPTl9ERVNDUklQVElPTl9DTEFTUzogc3RyaW5nID0gT1BUSU9OX0RFU0NSSVBUSU9OX0NMQVNTO1xyXG4gICAgcHVibGljIExPQURJTkdfQ0xBU1M6IHN0cmluZyA9IExPQURJTkdfQ0xBU1M7XHJcbiAgICBwdWJsaWMgUkVTVUxUU19OT1RfRk9VTkRfQ0xBU1M6IHN0cmluZyA9IFJFU1VMVFNfTk9UX0ZPVU5EX0NMQVNTO1xyXG5cclxuICAgIHByaXZhdGUgdHlwaW5nVGltZW91dDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBvcmlnaW5hbFNlYXJjaFZhbHVlOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIGNoYW5nZWRIaWdobGlnaHRTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuICAgIHByaXZhdGUgc2VsZWN0U3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcbiAgICBwcml2YXRlIHByb3BhZ2F0ZUNoYW5nZSA9IChfOiBhbnkpID0+IHsgfTtcclxuICAgIHByaXZhdGUgcHJvcGFnYXRlVG91Y2hlZCA9IChfOiBhbnkpID0+IHsgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgaXRlbUxpc3RTZXJ2aWNlOiBJdGVtTGlzdFNlcnZpY2UsXHJcbiAgICAgICAgcHVibGljIGF1dG9jb21wbGV0ZVNlcnZpY2U6IEF1dG9jb21wbGV0ZVNlcnZpY2UpIHtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnZhbGlkYXRlU2VydmljZSgpO1xyXG5cclxuICAgICAgICB0aGlzLmRpc2FibGVkID0gdGhpcy5nZXREZWZhdWx0SWZOdWxsT3JVbmRlZmluZWQodGhpcy5kaXNhYmxlZCwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMubWluQ2hhcnMgPSB0aGlzLmdldERlZmF1bHRJZk51bGxPclVuZGVmaW5lZCh0aGlzLm1pbkNoYXJzLCBERUZBVUxUX01JTl9TRUFSQ0hfTEVOR1RIKTtcclxuICAgICAgICB0aGlzLm1heENoYXJzID0gdGhpcy5tYXhDaGFycyB8fCBERUZBVUxUX01BWF9DSEFSUztcclxuICAgICAgICB0aGlzLnBhdXNlID0gdGhpcy5wYXVzZSB8fCBERUZBVUxUX1BBVVNFO1xyXG4gICAgICAgIHRoaXMubm90Rm91bmRUZXh0ID0gdGhpcy5ub3RGb3VuZFRleHQgfHwgTk9UX0ZPVU5EX1RFWFQ7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hpbmdUZXh0ID0gdGhpcy5zZWFyY2hpbmdUZXh0IHx8IFNFQVJDSElOR19URVhUO1xyXG5cclxuICAgICAgICB0aGlzLmNoYW5nZWRIaWdobGlnaHRTdWJzY3JpcHRpb24gPSB0aGlzLmF1dG9jb21wbGV0ZVNlcnZpY2UuY2hhbmdlZEhpZ2hsaWdodEl0ZW1TdWJqZWN0LnN1YnNjcmliZSgoaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uQWN0aXZlSW5kZXhDaGFuZ2VkKGluZGV4KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zZWxlY3RTdWJzY3JpcHRpb24gPSB0aGlzLmF1dG9jb21wbGV0ZVNlcnZpY2Uuc2VsZWN0SXRlbVN1YmplY3Quc3Vic2NyaWJlKChpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc2VhcmNoUmVzdWx0W2luZGV4XTtcclxuICAgICAgICAgICAgdGhpcy5wcm9wYWdhdGVDaGFuZ2UocmVzdWx0LnZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZC5lbWl0KHJlc3VsdCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNoYW5nZWRIaWdobGlnaHRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICB0aGlzLnNlbGVjdFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHdyaXRlVmFsdWUodmFsdWU6IGFueSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoVmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KSB7XHJcbiAgICAgICAgdGhpcy5wcm9wYWdhdGVDaGFuZ2UgPSBmbjtcclxuICAgIH1cclxuXHJcbiAgICByZWdpc3Rlck9uVG91Y2hlZChmbjogYW55KSB7XHJcbiAgICAgICAgdGhpcy5wcm9wYWdhdGVUb3VjaGVkID0gZm47XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgb25UeXBlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucHJvcGFnYXRlQ2hhbmdlKHRoaXMuc2VhcmNoVmFsdWUpO1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWxTZWFyY2hWYWx1ZSA9IHRoaXMuc2VhcmNoVmFsdWU7XHJcbiAgICAgICAgdGhpcy50eXBlLmVtaXQoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudmFsaWRzZWFyY2hUZXJtKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hTdGF0ZSA9IHRoaXMuc2VhcmNoU3RhdGVzLkxvYWRpbmc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5yZXNldFNlYXJjaFRpbWVvdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbklucHV0Qmx1cihldmVudDogRm9jdXNFdmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC5yZWxhdGVkVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGxldCByZWxhdGVkID0gPEhUTUxFbGVtZW50PmV2ZW50LnJlbGF0ZWRUYXJnZXQ7XHJcbiAgICAgICAgICAgIGlmIChyZWxhdGVkLmNsYXNzTGlzdC5jb250YWlucyh0aGlzLk9QVElPTl9DTEFTUykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wcm9wYWdhdGVUb3VjaGVkKHRoaXMuc2VhcmNoVmFsdWUpO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLmJsdXIuZW1pdChldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25JbnB1dEZvY3VzKGV2ZW50OiBFdmVudCkge1xyXG4gICAgICAgIHRoaXMuZm9jdXNFdmVudC5lbWl0KGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaW5wdXRDbGFzcygpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBjbGFzc2VzOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaW5wdXRDbGFzc2VzKSB7XHJcbiAgICAgICAgICAgIGNsYXNzZXMgPSB0aGlzLmlucHV0Q2xhc3Nlcy5qb2luKCcgJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY2xhc3NlcztcclxuICAgIH1cclxuXHJcbiAgICBmb2N1cygpIHtcclxuICAgICAgICAoPEhUTUxJbnB1dEVsZW1lbnQ+dGhpcy5pbnB1dEZpZWxkLm5hdGl2ZUVsZW1lbnQpLmZvY3VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICB0aGlzLm9uVHlwZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlU2VydmljZS5pc09wZW4gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNlYXJjaFN0YXRlID0gdGhpcy5zZWFyY2hTdGF0ZXMuVW50cmFja2VkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdmFsaWRhdGVTZXJ2aWNlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5zZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF1dG9jb21wbGV0ZVNlcnZpY2UgbXVzdCBiZSBpbXBsZW1lbnRlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzUGFyYW1ldGVyaXplZFNlYXJjaCh0aGlzLnNlcnZpY2UpICYmICh0aGlzLnNlYXJjaFBhcmFtZXRlcnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLnNlYXJjaFBhcmFtZXRlcnMgPT09IG51bGwpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBwcm92aWRlIGFkZGl0aW9uYWxTZWFyY2hQYXJhbXMgb3IganVzdCBwcm92aWRlIEF1dG9jb21wbGV0ZVNvdXJjZVNlcnZpY2UgaW5zdGFlYWQgb2YgUGFyYW1ldGVyaXplZEF1dG9jb21wbGV0ZVNvdXJjZVNlcnZpY2VcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25BY3RpdmVJbmRleENoYW5nZWQoYWN0aXZlSW5kZXg6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGxldCBoaWdobGlnaHRlZEl0ZW06IEF1dG9jb21wbGV0ZUl0ZW07XHJcblxyXG4gICAgICAgIGlmIChhY3RpdmVJbmRleCA9PT0gREVGQVVMVF9BQ1RJVkVfSU5ERVgpIHtcclxuICAgICAgICAgICAgaGlnaGxpZ2h0ZWRJdGVtID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hWYWx1ZSA9IHRoaXMub3JpZ2luYWxTZWFyY2hWYWx1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBoaWdobGlnaHRlZEl0ZW0gPSB0aGlzLnNlYXJjaFJlc3VsdFthY3RpdmVJbmRleF07XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoVmFsdWUgPSBoaWdobGlnaHRlZEl0ZW0udmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnByb3BhZ2F0ZUNoYW5nZSh0aGlzLnNlYXJjaFZhbHVlKTtcclxuICAgICAgICB0aGlzLmhpZ2hsaWdodGVkLmVtaXQoaGlnaGxpZ2h0ZWRJdGVtKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlc2V0U2VhcmNoVGltZW91dCgpIHtcclxuICAgICAgICB0aGlzLmNsZWFyU2VhcmNoVGltZW91dCgpO1xyXG4gICAgICAgIHRoaXMuc2V0U2VhcmNoVGltZW91dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0U2VhcmNoVGltZW91dCgpIHtcclxuICAgICAgICB0aGlzLnR5cGluZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMuc2VhcmNoLmJpbmQodGhpcyksIHRoaXMucGF1c2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2xlYXJTZWFyY2hUaW1lb3V0KCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnR5cGluZ1RpbWVvdXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2VhcmNoKCkge1xyXG4gICAgICAgIHRoaXMuaXRlbUxpc3RTZXJ2aWNlLnJlc3RvcmVJbnRpYWxBY3RpdmVJbmRleCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy52YWxpZHNlYXJjaFRlcm0oKSkge1xyXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1TZWFyY2goKS5maXJzdCgpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgIChyZXN1bHRzOiBBdXRvY29tcGxldGVJdGVtW10pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hTdGF0ZSAhPT0gdGhpcy5zZWFyY2hTdGF0ZXMuVW50cmFja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlU2VydmljZS5pc09wZW4gPSByZXN1bHRzLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbUxpc3RTZXJ2aWNlLml0ZW1zID0gcmVzdWx0cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hSZXN1bHQgPSByZXN1bHRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFN0YXRlID0gdGhpcy5zZWFyY2hTdGF0ZXMuRmluaXNoZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBlcmZvcm1TZWFyY2goKTogT2JzZXJ2YWJsZTxBdXRvY29tcGxldGVJdGVtW10+IHtcclxuICAgICAgICBpZiAodGhpcy5pc1BhcmFtZXRlcml6ZWRTZWFyY2godGhpcy5zZXJ2aWNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKDxQYXJhbWV0ZXJpemVkQXV0b2NvbXBsZXRlU291cmNlU2VydmljZT50aGlzLnNlcnZpY2UpLmdldFdpdGhQYXJhbXModGhpcy5zZWFyY2hWYWx1ZSwgdGhpcy5zZWFyY2hQYXJhbWV0ZXJzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gKDxBdXRvY29tcGxldGVTb3VyY2VTZXJ2aWNlPnRoaXMuc2VydmljZSkuZ2V0KHRoaXMuc2VhcmNoVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHZhbGlkc2VhcmNoVGVybSgpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuc2VhcmNoVmFsdWUgfHwgJycpLmxlbmd0aCA+PSB0aGlzLm1pbkNoYXJzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNQYXJhbWV0ZXJpemVkU2VhcmNoKHNlcnZpY2U6IEF1dG9jb21wbGV0ZVNvdXJjZVNlcnZpY2UgfCBQYXJhbWV0ZXJpemVkQXV0b2NvbXBsZXRlU291cmNlU2VydmljZSk6IHNlcnZpY2UgaXMgUGFyYW1ldGVyaXplZEF1dG9jb21wbGV0ZVNvdXJjZVNlcnZpY2Uge1xyXG4gICAgICAgIHJldHVybiAoPFBhcmFtZXRlcml6ZWRBdXRvY29tcGxldGVTb3VyY2VTZXJ2aWNlPnNlcnZpY2UpLmdldFdpdGhQYXJhbXMgIT09IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERlZmF1bHRJZk51bGxPclVuZGVmaW5lZDxUPih2YWx1ZTogVCwgZGVmYXVsdFZhbHVlOiBUKTogVCB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGxcclxuICAgICAgICAgICAgPyBkZWZhdWx0VmFsdWVcclxuICAgICAgICAgICAgOiB2YWx1ZTtcclxuICAgIH1cclxufSIsImltcG9ydCB7XHJcbiAgICBJbnB1dCxcclxuICAgIERpcmVjdGl2ZSxcclxuICAgIEhvc3RMaXN0ZW5lclxyXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcblxyXG5pbXBvcnQgeyBJdGVtTGlzdFNlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZXMvaXRlbS1saXN0LnNlcnZpY2VcIjtcclxuaW1wb3J0IHsgQXV0b2NvbXBsZXRlU2VydmljZSB9IGZyb20gXCIuLi9zZXJ2aWNlcy9hdXRvY29tcGxldGUuc2VydmljZVwiO1xyXG5cclxuQERpcmVjdGl2ZSh7XHJcbiAgICBzZWxlY3RvcjogJ1tyZW1vdGUtYXV0b2NvbXBsZXRlLW9wdGlvbl0nLFxyXG4gICAgaG9zdDoge1xyXG4gICAgICAgICcobW91c2VlbnRlciknOiAnb25Nb3VzZUVudGVyKCRldmVudCknLFxyXG4gICAgICAgICcobW91c2VsZWF2ZSknOiAnb25Nb3VzZUxlYXZlKCRldmVudCknLFxyXG4gICAgICAgICcoY2xpY2spJzogJ29uQ2xpY2soJGV2ZW50KSdcclxuICAgIH1cclxufSlcclxuZXhwb3J0IGNsYXNzIE9wdGlvbkRpcmVjdGl2ZSB7XHJcbiAgICBASW5wdXQoJ2l0ZW1JbmRleCcpIGluZGV4O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYXV0b2NvbXBsZXRlU2VydmljZTogQXV0b2NvbXBsZXRlU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGl0ZW1MaXN0U2VydmljZTogSXRlbUxpc3RTZXJ2aWNlKSB7XHJcbiAgICB9XHJcblxyXG4gICAgb25Nb3VzZUVudGVyKGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5pdGVtTGlzdFNlcnZpY2UuYWN0aXZlSW5kZXggPSB0aGlzLmluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIG9uTW91c2VMZWF2ZShldmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgIHRoaXMuaXRlbUxpc3RTZXJ2aWNlLnJlc3RvcmVJbnRpYWxBY3RpdmVJbmRleCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICB0aGlzLmF1dG9jb21wbGV0ZVNlcnZpY2Uuc2VsZWN0SXRlbVN1YmplY3QubmV4dCh0aGlzLmluZGV4KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBlbnVtIEtleUNvZGUge1xyXG4gICAgQmFja3NwYWNlID0gOCxcclxuICAgIFRhYiA9IDksXHJcbiAgICBFbnRlciA9IDEzLFxyXG4gICAgU2hpZnQgPSAxNixcclxuICAgIEN0cmwgPSAxNyxcclxuICAgIEFsdCA9IDE4LFxyXG4gICAgUGF1c2VCcmVhayA9IDE5LFxyXG4gICAgQ2Fwc0xvY2sgPSAyMCxcclxuICAgIEVzY2FwZSA9IDI3LFxyXG4gICAgU3BhY2UgPSAzMixcclxuICAgIFBhZ2VVcCA9IDMzLFxyXG4gICAgUGFnZURvd24gPSAzNCxcclxuICAgIEVuZCA9IDM1LFxyXG4gICAgSG9tZSA9IDM2LFxyXG4gICAgTGVmdEFycm93ID0gMzcsXHJcbiAgICBVcEFycm93ID0gMzgsXHJcbiAgICBSaWdodEFycm93ID0gMzksXHJcbiAgICBEb3duQXJyb3cgPSA0MCxcclxuICAgIEluc2VydCA9IDQ1LFxyXG4gICAgRGVsZXRlID0gNDYsXHJcbiAgICBaZXJvID0gNDgsXHJcbiAgICBDbG9zZWRQYXJlbiA9IDQ4LFxyXG4gICAgT25lID0gNDksXHJcbiAgICBFeGNsYW1hdGlvbk1hcmsgPSA0OSxcclxuICAgIFR3byA9IDUwLFxyXG4gICAgQXRTaWduID0gNTAsXHJcbiAgICBUaHJlZSA9IDUxLFxyXG4gICAgUG91bmRTaWduID0gNTEsXHJcbiAgICBIYXNoID0gNTEsXHJcbiAgICBGb3VyID0gNTIsXHJcbiAgICBEb2xsYXJTaWduID0gNTIsXHJcbiAgICBGaXZlID0gNTMsXHJcbiAgICBQZXJjZW50U2lnbiA9IDUzLFxyXG4gICAgU2l4ID0gNTQsXHJcbiAgICBDYXJldCA9IDU0LFxyXG4gICAgSGF0ID0gNTQsXHJcbiAgICBTZXZlbiA9IDU1LFxyXG4gICAgQW1wZXJzYW5kID0gNTUsXHJcbiAgICBFaWdodCA9IDU2LFxyXG4gICAgU3RhciA9IDU2LFxyXG4gICAgQXN0ZXJpayA9IDU2LFxyXG4gICAgTmluZSA9IDU3LFxyXG4gICAgT3BlblBhcmVuID0gNTcsXHJcbiAgICBBID0gNjUsXHJcbiAgICBCID0gNjYsXHJcbiAgICBDID0gNjcsXHJcbiAgICBEID0gNjgsXHJcbiAgICBFID0gNjksXHJcbiAgICBGID0gNzAsXHJcbiAgICBHID0gNzEsXHJcbiAgICBIID0gNzIsXHJcbiAgICBJID0gNzMsXHJcbiAgICBKID0gNzQsXHJcbiAgICBLID0gNzUsXHJcbiAgICBMID0gNzYsXHJcbiAgICBNID0gNzcsXHJcbiAgICBOID0gNzgsXHJcbiAgICBPID0gNzksXHJcbiAgICBQID0gODAsXHJcbiAgICBRID0gODEsXHJcbiAgICBSID0gODIsXHJcbiAgICBTID0gODMsXHJcbiAgICBUID0gODQsXHJcbiAgICBVID0gODUsXHJcbiAgICBWID0gODYsXHJcbiAgICBXID0gODcsXHJcbiAgICBYID0gODgsXHJcbiAgICBZID0gODksXHJcbiAgICBaID0gOTAsXHJcbiAgICBMZWZ0V2luZG93S2V5ID0gOTEsXHJcbiAgICBSaWdodFdpbmRvd0tleSA9IDkyLFxyXG4gICAgU2VsZWN0S2V5ID0gOTMsXHJcbiAgICBOdW1wYWQwID0gOTYsXHJcbiAgICBOdW1wYWQxID0gOTcsXHJcbiAgICBOdW1wYWQyID0gOTgsXHJcbiAgICBOdW1wYWQzID0gOTksXHJcbiAgICBOdW1wYWQ0ID0gMTAwLFxyXG4gICAgTnVtcGFkNSA9IDEwMSxcclxuICAgIE51bXBhZDYgPSAxMDIsXHJcbiAgICBOdW1wYWQ3ID0gMTAzLFxyXG4gICAgTnVtcGFkOCA9IDEwNCxcclxuICAgIE51bXBhZDkgPSAxMDUsXHJcbiAgICBNdWx0aXBseSA9IDEwNixcclxuICAgIEFkZCA9IDEwNyxcclxuICAgIFN1YnRyYWN0ID0gMTA5LFxyXG4gICAgRGVjaW1hbFBvaW50ID0gMTEwLFxyXG4gICAgRGl2aWRlID0gMTExLFxyXG4gICAgRjEgPSAxMTIsXHJcbiAgICBGMiA9IDExMyxcclxuICAgIEYzID0gMTE0LFxyXG4gICAgRjQgPSAxMTUsXHJcbiAgICBGNSA9IDExNixcclxuICAgIEY2ID0gMTE3LFxyXG4gICAgRjcgPSAxMTgsXHJcbiAgICBGOCA9IDExOSxcclxuICAgIEY5ID0gMTIwLFxyXG4gICAgRjEwID0gMTIxLFxyXG4gICAgRjExID0gMTIyLFxyXG4gICAgRjEyID0gMTIzLFxyXG4gICAgTnVtTG9jayA9IDE0NCxcclxuICAgIFNjcm9sbExvY2sgPSAxNDUsXHJcbiAgICBTZW1pQ29sb24gPSAxODYsXHJcbiAgICBFcXVhbHMgPSAxODcsXHJcbiAgICBDb21tYSA9IDE4OCxcclxuICAgIERhc2ggPSAxODksXHJcbiAgICBQZXJpb2QgPSAxOTAsXHJcbiAgICBVbmRlclNjb3JlID0gMTg5LFxyXG4gICAgUGx1c1NpZ24gPSAxODcsXHJcbiAgICBGb3J3YXJkU2xhc2ggPSAxOTEsXHJcbiAgICBUaWxkZSA9IDE5MixcclxuICAgIEdyYXZlQWNjZW50ID0gMTkyLFxyXG4gICAgT3BlbkJyYWNrZXQgPSAyMTksXHJcbiAgICBDbG9zZWRCcmFja2V0ID0gMjIxLFxyXG4gICAgUXVvdGUgPSAyMjIsXHJcbn0iLCJpbXBvcnQgeyBFbGVtZW50UmVmIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgU0VBUkNIX1dSQVBQRVJfQ0xBU1MsIE9QVElPTl9DTEFTUywgREVGQVVMVF9BQ1RJVkVfSU5ERVggfSBmcm9tIFwiLi4vY29uc3RhbnRzL2F1dG9jb21wbGV0ZS5jb25zdGFudHNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTY3JvbGxTZXJ2aWNlIHtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudDogRWxlbWVudFJlZikge1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUtleWJvYXJPcHRpb25OYXZpZ2F0aW9uKGFjdGl2ZUluZGV4OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBhdXRvY29tcGxldGVFbGVtZW50ID0gPEhUTUxFbGVtZW50PnRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IGxpc3RFbGVtZW50ID0gYXV0b2NvbXBsZXRlRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtTRUFSQ0hfV1JBUFBFUl9DTEFTU31gKTtcclxuXHJcbiAgICAgICAgaWYgKGxpc3RFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChhY3RpdmVJbmRleCA9PT0gREVGQVVMVF9BQ1RJVkVfSU5ERVgpIHtcclxuICAgICAgICAgICAgICAgIGxpc3RFbGVtZW50LnNjcm9sbFRvKDAsIDApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBvcHRpb25FbGVtZW50cyA9IGxpc3RFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke09QVElPTl9DTEFTU31gKTtcclxuICAgICAgICAgICAgY29uc3QgYWN0aXZlRWxlbWVudCA9IG9wdGlvbkVsZW1lbnRzW2FjdGl2ZUluZGV4XTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxpc3RUb3AgPSBsaXN0RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpc3RCb3R0b20gPSBsaXN0VG9wICsgbGlzdEVsZW1lbnQuY2xpZW50SGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudFRvcCA9IGFjdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50Qm90dG9tID0gZWxlbWVudFRvcCArIGFjdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgaWYgKGxpc3RUb3AgPiBlbGVtZW50VG9wKSB7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVFbGVtZW50LnNjcm9sbEludG9WaWV3KHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobGlzdEJvdHRvbSA8IGVsZW1lbnRCb3R0b20pIHtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtcclxuICAgIERpcmVjdGl2ZSxcclxuICAgIEhvc3RMaXN0ZW5lcixcclxuICAgIEVsZW1lbnRSZWYsXHJcbiAgICBJbnB1dFxyXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcblxyXG5pbXBvcnQgeyBLZXlDb2RlIH0gZnJvbSBcIi4uL2VudW1zL2tleS1rb2RlXCI7XHJcbmltcG9ydCB7IEl0ZW1MaXN0U2VydmljZSB9IGZyb20gXCIuLi9zZXJ2aWNlcy9pdGVtLWxpc3Quc2VydmljZVwiO1xyXG5pbXBvcnQgeyBBdXRvY29tcGxldGVTZXJ2aWNlIH0gZnJvbSBcIi4uL3NlcnZpY2VzL2F1dG9jb21wbGV0ZS5zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IFNjcm9sbFNlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZXMvc2Nyb2xsLXNlcnZpY2VcIjtcclxuXHJcbkBEaXJlY3RpdmUoe1xyXG4gICAgc2VsZWN0b3I6ICdba2V5Ym9hcmQtbmF2aWdhdGlvbl0nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBLZXlib2FyZE5hdmlnYXRpb25EaXJlY3RpdmUge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBzY3JvbGxTZXJ2aWNlOiBTY3JvbGxTZXJ2aWNlO1xyXG5cclxuICAgIEBJbnB1dCgpIHN0b3BFbnRlclByb3BhZ2F0aW9uOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhdXRvY29tcGxldGVTZXJ2aWNlOiBBdXRvY29tcGxldGVTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgaXRlbUxpc3RTZXJ2aWNlOiBJdGVtTGlzdFNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBlbGVtZW50OiBFbGVtZW50UmVmKSB7XHJcbiAgICAgICAgdGhpcy5zY3JvbGxTZXJ2aWNlID0gbmV3IFNjcm9sbFNlcnZpY2UoZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgQEhvc3RMaXN0ZW5lcigna2V5ZG93bicsIFsnJGV2ZW50J10pIG9uS2V5ZG93bihldmVudDogS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgICAgIGxldCBrZXkgPSBldmVudC53aGljaCB8fCBldmVudC5rZXlDb2RlO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKGtleSkge1xyXG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuRG93bkFycm93OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVEb3duS2V5KGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuVXBBcnJvdzpcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlVXBLZXkoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5FbnRlcjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRW50ZXIoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlRG93bktleShldmVudDogS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgICAgIHRoaXMuaXRlbUxpc3RTZXJ2aWNlLmFjdGl2ZUluZGV4Kys7XHJcbiAgICAgICAgdGhpcy5zY3JvbGxTZXJ2aWNlLmhhbmRsZUtleWJvYXJPcHRpb25OYXZpZ2F0aW9uKHRoaXMuaXRlbUxpc3RTZXJ2aWNlLmFjdGl2ZUluZGV4KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZVVwS2V5KGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5pdGVtTGlzdFNlcnZpY2UuYWN0aXZlSW5kZXgtLTtcclxuICAgICAgICB0aGlzLnNjcm9sbFNlcnZpY2UuaGFuZGxlS2V5Ym9hck9wdGlvbk5hdmlnYXRpb24odGhpcy5pdGVtTGlzdFNlcnZpY2UuYWN0aXZlSW5kZXgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlRW50ZXIoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5pdGVtTGlzdFNlcnZpY2UuYWN0aXZlSW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1dG9jb21wbGV0ZVNlcnZpY2Uuc2VsZWN0SXRlbVN1YmplY3QubmV4dCh0aGlzLml0ZW1MaXN0U2VydmljZS5hY3RpdmVJbmRleCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdG9wRW50ZXJQcm9wYWdhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7IEZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5cclxuaW1wb3J0IHsgUmVtb3RlQXV0b2NvbXBsZXRlQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9hdXRvY29tcGxldGUuY29tcG9uZW50XCI7XHJcbmltcG9ydCB7IE9wdGlvblRlbXBsYXRlRGlyZWN0aXZlIH0gZnJvbSBcIi4vZGlyZWN0aXZlcy9vcHRpb24tdGVtcGxhdGUuZGlyZWN0aXZlXCI7XHJcbmltcG9ydCB7IE9wdGlvbkRpcmVjdGl2ZSB9IGZyb20gXCIuL2RpcmVjdGl2ZXMvb3B0aW9uLWRpcmVjdGl2ZVwiO1xyXG5pbXBvcnQgeyBJdGVtTGlzdFNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlcy9pdGVtLWxpc3Quc2VydmljZVwiO1xyXG5pbXBvcnQgeyBLZXlib2FyZE5hdmlnYXRpb25EaXJlY3RpdmUgfSBmcm9tIFwiLi9kaXJlY3RpdmVzL2tleWJvYXJkLW5hdmlnYXRpb24uZGlyZWN0aXZlXCI7XHJcbmltcG9ydCB7IEF1dG9jb21wbGV0ZVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlcy9hdXRvY29tcGxldGUuc2VydmljZVwiO1xyXG5cclxuQE5nTW9kdWxlKHtcclxuICAgIGltcG9ydHM6IFtcclxuICAgICAgICBDb21tb25Nb2R1bGUsXHJcbiAgICAgICAgRm9ybXNNb2R1bGVcclxuICAgIF0sXHJcbiAgICBkZWNsYXJhdGlvbnM6IFtcclxuICAgICAgICBSZW1vdGVBdXRvY29tcGxldGVDb21wb25lbnQsXHJcbiAgICAgICAgT3B0aW9uVGVtcGxhdGVEaXJlY3RpdmUsXHJcbiAgICAgICAgT3B0aW9uRGlyZWN0aXZlLFxyXG4gICAgICAgIEtleWJvYXJkTmF2aWdhdGlvbkRpcmVjdGl2ZVxyXG4gICAgXSxcclxuICAgIGV4cG9ydHM6IFtcclxuICAgICAgICBSZW1vdGVBdXRvY29tcGxldGVDb21wb25lbnQsXHJcbiAgICAgICAgT3B0aW9uVGVtcGxhdGVEaXJlY3RpdmVcclxuICAgIF0sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBSZW1vdGVBdXRvY29tcGxldGVNb2R1bGUge1xyXG59Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxNQUFhLG9CQUFvQixHQUFXLENBQUMsQ0FBQzs7QUFDOUMsTUFBYSx5QkFBeUIsR0FBVyxDQUFDOztBQUNsRCxNQUFhLGlCQUFpQixHQUFXLFVBQVU7O0FBQ25ELE1BQWEsYUFBYSxH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